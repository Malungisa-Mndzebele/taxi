# ğŸ“Š Taxi App - Visual Diagrams

## Table of Contents
1. [System Architecture Diagrams](#system-architecture-diagrams)
2. [Sequence Diagrams](#sequence-diagrams)
3. [Class Diagrams](#class-diagrams)
4. [State Diagrams](#state-diagrams)
5. [Activity Diagrams](#activity-diagrams)
6. [Component Diagrams](#component-diagrams)

---

## System Architecture Diagrams

### High-Level System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT LAYER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Mobile App        â”‚   Web App (PWA)  â”‚   Admin Dashboard    â”‚
â”‚   (React Native)    â”‚   (React)        â”‚   (Future)           â”‚
â”‚                     â”‚                  â”‚                      â”‚
â”‚  â€¢ iOS/Android      â”‚  â€¢ Responsive    â”‚  â€¢ Analytics        â”‚
â”‚  â€¢ Offline Support  â”‚  â€¢ PWA Features  â”‚  â€¢ User Management   â”‚
â”‚  â€¢ Push Notificationsâ”‚  â€¢ Service Workerâ”‚  â€¢ System Config     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                   â”‚                    â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   API Gateway       â”‚
                    â”‚  â€¢ Rate Limiting    â”‚
                    â”‚  â€¢ Authentication   â”‚
                    â”‚  â€¢ Request Routing  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Service  â”‚   â”‚  Ride Service      â”‚   â”‚ Driver Service  â”‚
â”‚                â”‚   â”‚                    â”‚   â”‚                 â”‚
â”‚ â€¢ Registration â”‚   â”‚ â€¢ Request Ride     â”‚   â”‚ â€¢ Status Mgmt    â”‚
â”‚ â€¢ Login        â”‚   â”‚ â€¢ Accept Ride     â”‚   â”‚ â€¢ Location Updateâ”‚
â”‚ â€¢ JWT Tokens   â”‚   â”‚ â€¢ Track Ride      â”‚   â”‚ â€¢ Earnings       â”‚
â”‚ â€¢ Password     â”‚   â”‚ â€¢ Complete Ride   â”‚   â”‚ â€¢ Profile        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                      â”‚                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Socket.IO Server   â”‚
                    â”‚  â€¢ Real-time Events â”‚
                    â”‚  â€¢ Location Updates â”‚
                    â”‚  â€¢ Status Changes   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB      â”‚   â”‚   Redis Cache     â”‚   â”‚  File Storage   â”‚
â”‚                â”‚   â”‚                    â”‚   â”‚                 â”‚
â”‚ â€¢ Users        â”‚   â”‚ â€¢ Sessions        â”‚   â”‚ â€¢ Profile Pics   â”‚
â”‚ â€¢ Rides        â”‚   â”‚ â€¢ Rate Limits     â”‚   â”‚ â€¢ Documents      â”‚
â”‚ â€¢ Indexes      â”‚   â”‚ â€¢ Temp Data       â”‚   â”‚ â€¢ Media         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  External Services   â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ â€¢ Google Maps API    â”‚
                    â”‚ â€¢ Stripe (Payments)  â”‚
                    â”‚ â€¢ Twilio (SMS)       â”‚
                    â”‚ â€¢ FCM (Push)         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Microservices Architecture (Future)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Gateway (Kong)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚                â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚ Auth  â”‚      â”‚   Ride    â”‚    â”‚ Driver   â”‚
â”‚ Svc   â”‚      â”‚   Svc     â”‚    â”‚ Svc      â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚                â”‚                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Message Queue       â”‚
         â”‚   (RabbitMQ/Kafka)     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚                â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚ Notif â”‚      â”‚ Payment   â”‚    â”‚ Analyticsâ”‚
â”‚ Svc   â”‚      â”‚ Svc       â”‚    â”‚ Svc      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Sequence Diagrams

### Sequence 1: Passenger Ride Request Flow

```
Passenger    Mobile App    API Server    Socket.IO    Driver    Driver App
    â”‚            â”‚             â”‚             â”‚          â”‚           â”‚
    â”‚â”€â”€Loginâ”€â”€â”€â”€â–ºâ”‚             â”‚             â”‚          â”‚           â”‚
    â”‚            â”‚â”€â”€POST /auth/loginâ”€â”€â”€â–ºâ”‚             â”‚          â”‚           â”‚
    â”‚            â”‚â—„â”€â”€JWT Tokenâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚          â”‚           â”‚
    â”‚â—„â”€â”€Tokenâ”€â”€â”€â”€â”‚             â”‚             â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚             â”‚          â”‚           â”‚
    â”‚â”€â”€Requestâ”€â”€â–ºâ”‚             â”‚             â”‚          â”‚           â”‚
    â”‚  Ride      â”‚             â”‚             â”‚          â”‚           â”‚
    â”‚            â”‚â”€â”€POST /rides/requestâ”€â”€â–ºâ”‚             â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚â”€â”€Calculateâ”€â”€â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚  Fare       â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚â”€â”€Findâ”€â”€â”€â”€â”€â”€â”€â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚  Drivers    â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
    â”‚            â”‚             â”‚  new-ride   â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚             â”‚          â”‚â”€â”€Notifyâ”€â”€â–ºâ”‚
    â”‚            â”‚             â”‚             â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚â—„â”€â”€Acceptâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€Acceptâ”€â”€â”€â”‚
    â”‚            â”‚             â”‚             â”‚          â”‚           â”‚
    â”‚            â”‚â—„â”€â”€Ride Createdâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚          â”‚           â”‚
    â”‚â—„â”€â”€Rideâ”€â”€â”€â”€â”€â”‚             â”‚             â”‚          â”‚           â”‚
    â”‚  Created   â”‚             â”‚             â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
    â”‚            â”‚             â”‚  accepted   â”‚          â”‚           â”‚
    â”‚â—„â”€â”€Updateâ”€â”€â”€â”‚â—„â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”‚             â”‚          â”‚           â”‚
    â”‚            â”‚  accepted   â”‚             â”‚          â”‚           â”‚
    â”‚            â”‚             â”‚             â”‚          â”‚           â”‚
    â”‚â”€â”€Trackâ”€â”€â”€â”€â–ºâ”‚             â”‚             â”‚          â”‚           â”‚
    â”‚            â”‚â”€â”€GET /rides/:idâ”€â”€â”€â–ºâ”‚             â”‚          â”‚           â”‚
    â”‚            â”‚â—„â”€â”€Ride Dataâ”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚          â”‚           â”‚
    â”‚â—„â”€â”€Locationâ”€â”‚â—„â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”‚â—„â”€â”€Locationâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€Updateâ”€â”€â”€â”‚
    â”‚  Update    â”‚  location    â”‚  Update     â”‚          â”‚  Location â”‚
    â”‚            â”‚             â”‚             â”‚          â”‚           â”‚
```

### Sequence 2: Driver Accepts and Completes Ride

```
Driver       Driver App    API Server    Socket.IO    Passenger  Passenger App
    â”‚            â”‚             â”‚             â”‚            â”‚            â”‚
    â”‚â”€â”€Goâ”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚             â”‚            â”‚            â”‚
    â”‚  Online    â”‚â”€â”€PUT /drivers/statusâ”€â”€â–ºâ”‚             â”‚            â”‚            â”‚
    â”‚            â”‚â—„â”€â”€Status OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚            â”‚
    â”‚â—„â”€â”€Rideâ”€â”€â”€â”€â”€â”‚â—„â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”‚â—„â”€â”€Requestâ”€â”€â”€â”‚â—„â”€â”€Requestâ”€â”€â”€â”‚            â”‚
    â”‚  Request   â”‚  new-ride   â”‚  Ride      â”‚  Ride      â”‚            â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚            â”‚
    â”‚â”€â”€Acceptâ”€â”€â”€â–ºâ”‚             â”‚             â”‚            â”‚            â”‚
    â”‚            â”‚â”€â”€PUT /rides/:id/acceptâ–ºâ”‚             â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚â”€â”€Updateâ”€â”€â”€â”‚            â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚  Ride     â”‚            â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
    â”‚            â”‚             â”‚  accepted  â”‚            â”‚            â”‚
    â”‚            â”‚â—„â”€â”€Rideâ”€â”€â”€â”€â”€â”€â”€â”‚             â”‚            â”‚â—„â”€â”€Updateâ”€â”€â”€â”‚
    â”‚            â”‚  Updated    â”‚             â”‚            â”‚  Accepted  â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚            â”‚
    â”‚â”€â”€Navigateâ”€â–ºâ”‚             â”‚             â”‚            â”‚            â”‚
    â”‚  to Pickup â”‚             â”‚             â”‚            â”‚            â”‚
    â”‚            â”‚â”€â”€PUT /drivers/locationâ”€â”€â–ºâ”‚             â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
    â”‚            â”‚             â”‚  location   â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚â—„â”€â”€Locationâ”€â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚  Update    â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚            â”‚
    â”‚â”€â”€Arrivedâ”€â”€â–ºâ”‚             â”‚             â”‚            â”‚            â”‚
    â”‚            â”‚â”€â”€PUT /rides/:id/arriveâ”€â”€â–ºâ”‚             â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
    â”‚            â”‚             â”‚  arrived   â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚â—„â”€â”€Arrivedâ”€â”€â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚  Notificationâ”‚
    â”‚            â”‚             â”‚             â”‚            â”‚            â”‚
    â”‚â”€â”€Startâ”€â”€â”€â”€â–ºâ”‚             â”‚             â”‚            â”‚            â”‚
    â”‚  Ride      â”‚â”€â”€PUT /rides/:id/startâ”€â”€â”€â–ºâ”‚             â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
    â”‚            â”‚             â”‚  started   â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚â—„â”€â”€Startedâ”€â”€â”‚
    â”‚            â”‚             â”‚             â”‚            â”‚            â”‚
    â”‚â”€â”€Completeâ”€â–ºâ”‚             â”‚             â”‚            â”‚            â”‚
    â”‚            â”‚â”€â”€PUT /rides/:id/completeâ–ºâ”‚             â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚â”€â”€Processâ”€â”€â”€â”‚            â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚  Payment   â”‚            â”‚            â”‚            â”‚
    â”‚            â”‚             â”‚â”€â”€Emitâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
    â”‚            â”‚             â”‚  completed â”‚            â”‚            â”‚
    â”‚            â”‚â—„â”€â”€Rideâ”€â”€â”€â”€â”€â”€â”€â”‚             â”‚            â”‚â—„â”€â”€Completeâ”€â”‚
    â”‚            â”‚  Completed  â”‚             â”‚            â”‚  Notificationâ”‚
    â”‚            â”‚             â”‚             â”‚            â”‚            â”‚
```

### Sequence 3: Authentication Flow

```
User         Client App    API Server    Database    External Service
    â”‚            â”‚             â”‚             â”‚              â”‚
    â”‚â”€â”€Registerâ”€â–ºâ”‚             â”‚             â”‚              â”‚
    â”‚            â”‚â”€â”€POST /auth/registerâ”€â”€â”€â–ºâ”‚             â”‚              â”‚
    â”‚            â”‚             â”‚â”€â”€Validateâ”€â”€â”€â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚  Input      â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚â”€â”€Hashâ”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚  Password   â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚â”€â”€Saveâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€Insertâ”€â”€â”€â”€â”€â–ºâ”‚              â”‚
    â”‚            â”‚             â”‚  User       â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚â—„â”€â”€Userâ”€â”€â”€â”€â”€â”€â”¼â”€â”€Userâ”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
    â”‚            â”‚             â”‚  Created    â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚â”€â”€Generateâ”€â”€â”€â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚  JWT Token â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚â”€â”€Sendâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€SMSâ”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚            â”‚             â”‚  SMS       â”‚              â”‚  Verificationâ”‚
    â”‚            â”‚â—„â”€â”€Tokenâ”€â”€â”€â”€â”€â”‚             â”‚              â”‚              â”‚
    â”‚            â”‚  + User     â”‚             â”‚              â”‚              â”‚
    â”‚â—„â”€â”€Successâ”€â”€â”‚             â”‚             â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚             â”‚              â”‚              â”‚
    â”‚â”€â”€Verifyâ”€â”€â”€â–ºâ”‚             â”‚             â”‚              â”‚              â”‚
    â”‚  Phone     â”‚â”€â”€POST /auth/verify-phoneâ–ºâ”‚             â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚â”€â”€Verifyâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€Verifyâ”€â”€â”€â”€â”€â”‚
    â”‚            â”‚             â”‚  Code      â”‚              â”‚  Code       â”‚
    â”‚            â”‚             â”‚â”€â”€Updateâ”€â”€â”€â”¼â”€â”€Updateâ”€â”€â”€â”€â”€â–ºâ”‚              â”‚
    â”‚            â”‚             â”‚  User      â”‚              â”‚              â”‚
    â”‚            â”‚â—„â”€â”€Verifiedâ”€â”€â”€â”‚             â”‚              â”‚              â”‚
    â”‚â—„â”€â”€Verifiedâ”€â”€â”‚             â”‚             â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚             â”‚              â”‚              â”‚
    â”‚â”€â”€Loginâ”€â”€â”€â”€â–ºâ”‚             â”‚             â”‚              â”‚              â”‚
    â”‚            â”‚â”€â”€POST /auth/loginâ”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚â”€â”€Findâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€Queryâ”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚
    â”‚            â”‚             â”‚  User       â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚â—„â”€â”€Userâ”€â”€â”€â”€â”€â”€â”¼â”€â”€Userâ”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
    â”‚            â”‚             â”‚â”€â”€Compareâ”€â”€â”€â”€â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚  Password  â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚â”€â”€Generateâ”€â”€â”€â”‚              â”‚              â”‚
    â”‚            â”‚             â”‚  JWT Token â”‚              â”‚              â”‚
    â”‚            â”‚â—„â”€â”€Tokenâ”€â”€â”€â”€â”€â”‚             â”‚              â”‚              â”‚
    â”‚â—„â”€â”€Loggedâ”€â”€â”€â”‚             â”‚             â”‚              â”‚              â”‚
    â”‚  In        â”‚             â”‚             â”‚              â”‚              â”‚
```

---

## Class Diagrams

### Backend Class Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Model                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - _id: ObjectId                                              â”‚
â”‚ - firstName: String                                           â”‚
â”‚ - lastName: String                                            â”‚
â”‚ - email: String (unique)                                     â”‚
â”‚ - phone: String (unique)                                     â”‚
â”‚ - password: String (hashed)                                   â”‚
â”‚ - role: Enum['passenger', 'driver']                         â”‚
â”‚ - currentLocation: GeoJSON                                   â”‚
â”‚ - driverProfile: Object                                      â”‚
â”‚ - preferences: Map                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + comparePassword(password): Promise<Boolean>                â”‚
â”‚ + toJSON(): Object                                           â”‚
â”‚ + fullName: String (virtual)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Ride Model                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - _id: ObjectId                                              â”‚
â”‚ - passenger: ObjectId (ref: User)                            â”‚
â”‚ - driver: ObjectId (ref: User)                               â”‚
â”‚ - status: Enum                                               â”‚
â”‚ - pickupLocation: GeoJSON                                    â”‚
â”‚ - dropoffLocation: GeoJSON                                   â”‚
â”‚ - distance: Number                                           â”‚
â”‚ - fare: Object                                               â”‚
â”‚ - payment: Object                                            â”‚
â”‚ - rating: Object                                             â”‚
â”‚ - timeline: Object                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + calculateFare(): Number                                    â”‚
â”‚ + updateStatus(status, data): Promise<Ride>                 â”‚
â”‚ + duration: Number (virtual)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Service Layer Classes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AuthService                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - userRepository: UserRepository                            â”‚
â”‚ - jwtSecret: String                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + register(userData): Promise<{user, token}>                â”‚
â”‚ + login(email, password): Promise<{user, token}>          â”‚
â”‚ + verifyToken(token): Promise<Object>                       â”‚
â”‚ + generateToken(user): String                               â”‚
â”‚ + hashPassword(password): Promise<String>                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RideService                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - rideRepository: RideRepository                             â”‚
â”‚ - userRepository: UserRepository                            â”‚
â”‚ - fareCalculator: FareCalculator                             â”‚
â”‚ - notificationService: NotificationService                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + requestRide(passengerId, rideData): Promise<Ride>        â”‚
â”‚ + acceptRide(rideId, driverId): Promise<Ride>              â”‚
â”‚ + updateRideStatus(rideId, status, data): Promise<Ride>    â”‚
â”‚ + getActiveRides(userId, role): Promise<Ride[]>            â”‚
â”‚ + getRideHistory(userId, role, filters): Promise<Ride[]>   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FareCalculator                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - baseFare: Number                                           â”‚
â”‚ - perKmRate: Number                                          â”‚
â”‚ - perMinuteRate: Number                                      â”‚
â”‚ - surgeMultiplier: Number                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + calculateFare(distance, duration, surge): Object          â”‚
â”‚ + calculateSurgeMultiplier(demand, supply): Number          â”‚
â”‚ + estimateFare(distance, duration): Number                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Frontend Component Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AuthContext                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - user: User | null                                          â”‚
â”‚ - token: String | null                                       â”‚
â”‚ - isLoading: Boolean                                         â”‚
â”‚ - error: String | null                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + login(email, password): Promise<void>                     â”‚
â”‚ + register(userData): Promise<void>                         â”‚
â”‚ + logout(): void                                             â”‚
â”‚ + updateUser(userData): Promise<void>                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚ uses
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AuthScreen                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - email: String                                              â”‚
â”‚ - password: String                                           â”‚
â”‚ - isLogin: Boolean                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + handleSubmit(): void                                       â”‚
â”‚ + toggleMode(): void                                         â”‚
â”‚ + render(): JSX.Element                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MapComponent                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - region: Region                                            â”‚
â”‚ - markers: Marker[]                                          â”‚
â”‚ - polylines: Polyline[]                                      â”‚
â”‚ - followUser: Boolean                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + updateLocation(location): void                            â”‚
â”‚ + addMarker(marker): void                                    â”‚
â”‚ + drawRoute(origin, destination): void                       â”‚
â”‚ + centerOnLocation(location): void                          â”‚
â”‚ + render(): JSX.Element                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## State Diagrams

### Ride State Machine

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  requested  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ driver accepts
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   accepted  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ driver arrives
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   arrived   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ driver starts
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   started   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ driver completes
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  completed  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  requested  â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ user/driver cancels
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  cancelled  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Driver Status State Machine

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   offline   â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ go online
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    online   â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ accept ride
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ unavailable â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ complete ride
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    online   â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ go offline
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   offline   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### User Authentication State

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  unauthenticated â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ login/register
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ authenticating â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ success
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ authenticated â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ logout/token expired
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  unauthenticated â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Activity Diagrams

### Activity 1: Complete Ride Flow

```
[Start]
   â”‚
   â–¼
[Passenger Opens App]
   â”‚
   â–¼
[Select Pickup Location]
   â”‚
   â–¼
[Select Dropoff Location]
   â”‚
   â–¼
[Calculate Fare Estimate]
   â”‚
   â–¼
{User Confirms?}
   â”‚ NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ YES            â”‚
   â”‚                â”‚
   â–¼                â”‚
[Request Ride]      â”‚
   â”‚                â”‚
   â–¼                â”‚
[Search for Drivers]â”‚
   â”‚                â”‚
   â–¼                â”‚
{Drivers Available?}â”‚
   â”‚ NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ YES            â”‚
   â”‚                â”‚
   â–¼                â”‚
[Notify Drivers]    â”‚
   â”‚                â”‚
   â–¼                â”‚
{Driver Accepts?}   â”‚
   â”‚ NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ YES            â”‚
   â”‚                â”‚
   â–¼                â”‚
[Track Driver]      â”‚
   â”‚                â”‚
   â–¼                â”‚
{Driver Arrived?}   â”‚
   â”‚ NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ YES            â”‚
   â”‚                â”‚
   â–¼                â”‚
[Start Ride]        â”‚
   â”‚                â”‚
   â–¼                â”‚
[Track to Destination]â”‚
   â”‚                â”‚
   â–¼                â”‚
[Complete Ride]     â”‚
   â”‚                â”‚
   â–¼                â”‚
[Process Payment]   â”‚
   â”‚                â”‚
   â–¼                â”‚
[Rate Driver]       â”‚
   â”‚                â”‚
   â–¼                â”‚
[End]               â”‚
   â”‚                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Activity 2: Driver Earnings Calculation

```
[Start]
   â”‚
   â–¼
[Driver Completes Ride]
   â”‚
   â–¼
[Get Ride Details]
   â”‚
   â–¼
[Extract Fare Information]
   â”‚
   â”œâ”€â”€â–º [Base Fare]
   â”‚
   â”œâ”€â”€â–º [Distance Fare]
   â”‚
   â”œâ”€â”€â–º [Time Fare]
   â”‚
   â”œâ”€â”€â–º [Surge Multiplier]
   â”‚
   â–¼
[Calculate Total Fare]
   â”‚
   â–¼
[Apply Commission Rate]
   â”‚
   â–¼
[Calculate Driver Earnings]
   â”‚
   â–¼
[Update Driver Earnings]
   â”‚
   â”œâ”€â”€â–º [Daily Earnings]
   â”‚
   â”œâ”€â”€â–º [Weekly Earnings]
   â”‚
   â”œâ”€â”€â–º [Monthly Earnings]
   â”‚
   â”œâ”€â”€â–º [Total Earnings]
   â”‚
   â–¼
[Update Statistics]
   â”‚
   â”œâ”€â”€â–º [Total Rides]
   â”‚
   â”œâ”€â”€â–º [Average Rating]
   â”‚
   â”œâ”€â”€â–º [Total Distance]
   â”‚
   â–¼
[End]
```

---

## Component Diagrams

### Frontend Component Hierarchy

```
App
â”œâ”€â”€ AuthProvider
â”‚   â””â”€â”€ AuthContext
â”‚       â””â”€â”€ AuthScreen
â”‚           â”œâ”€â”€ LoginForm
â”‚           â””â”€â”€ RegisterForm
â”‚
â”œâ”€â”€ SocketProvider
â”‚   â””â”€â”€ SocketContext
â”‚
â””â”€â”€ NavigationContainer
    â”œâ”€â”€ StackNavigator
    â”‚   â”œâ”€â”€ HomeScreen (Passenger)
    â”‚   â”‚   â”œâ”€â”€ MapComponent
    â”‚   â”‚   â”‚   â”œâ”€â”€ LocationMarker
    â”‚   â”‚   â”‚   â”œâ”€â”€ DriverMarker
    â”‚   â”‚   â”‚   â””â”€â”€ RoutePolyline
    â”‚   â”‚   â”œâ”€â”€ RideRequestCard
    â”‚   â”‚   â””â”€â”€ ActiveRideCard
    â”‚   â”‚
    â”‚   â”œâ”€â”€ DriverHomeScreen
    â”‚   â”‚   â”œâ”€â”€ StatusToggle
    â”‚   â”‚   â”œâ”€â”€ EarningsCard
    â”‚   â”‚   â”œâ”€â”€ RideRequestList
    â”‚   â”‚   â””â”€â”€ ActiveRideCard
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ProfileScreen
    â”‚   â”‚   â”œâ”€â”€ ProfileHeader
    â”‚   â”‚   â”œâ”€â”€ ProfileForm
    â”‚   â”‚   â””â”€â”€ SettingsList
    â”‚   â”‚
    â”‚   â”œâ”€â”€ RideHistoryScreen
    â”‚   â”‚   â”œâ”€â”€ FilterBar
    â”‚   â”‚   â””â”€â”€ RideList
    â”‚   â”‚       â””â”€â”€ RideCard
    â”‚   â”‚
    â”‚   â””â”€â”€ RideDetailsScreen
    â”‚       â”œâ”€â”€ RideInfo
    â”‚       â”œâ”€â”€ MapView
    â”‚       â”œâ”€â”€ PaymentInfo
    â”‚       â””â”€â”€ RatingForm
    â”‚
    â””â”€â”€ Shared Components
        â”œâ”€â”€ Button
        â”œâ”€â”€ Input
        â”œâ”€â”€ Card
        â”œâ”€â”€ Modal
        â””â”€â”€ LoadingSpinner
```

### Backend Component Structure

```
Express Application
â”œâ”€â”€ Middleware Layer
â”‚   â”œâ”€â”€ helmet (Security)
â”‚   â”œâ”€â”€ cors (CORS)
â”‚   â”œâ”€â”€ rateLimit (Rate Limiting)
â”‚   â”œâ”€â”€ bodyParser (Body Parsing)
â”‚   â”œâ”€â”€ auth (JWT Authentication)
â”‚   â””â”€â”€ validation (Input Validation)
â”‚
â”œâ”€â”€ Route Layer
â”‚   â”œâ”€â”€ /api/auth
â”‚   â”‚   â”œâ”€â”€ POST /register
â”‚   â”‚   â”œâ”€â”€ POST /login
â”‚   â”‚   â”œâ”€â”€ GET /me
â”‚   â”‚   â””â”€â”€ POST /verify-phone
â”‚   â”‚
â”‚   â”œâ”€â”€ /api/rides
â”‚   â”‚   â”œâ”€â”€ POST /request
â”‚   â”‚   â”œâ”€â”€ GET /:id
â”‚   â”‚   â”œâ”€â”€ PUT /:id/accept
â”‚   â”‚   â”œâ”€â”€ PUT /:id/complete
â”‚   â”‚   â””â”€â”€ GET /history
â”‚   â”‚
â”‚   â”œâ”€â”€ /api/drivers
â”‚   â”‚   â”œâ”€â”€ GET /status
â”‚   â”‚   â”œâ”€â”€ PUT /status
â”‚   â”‚   â”œâ”€â”€ PUT /location
â”‚   â”‚   â””â”€â”€ GET /earnings
â”‚   â”‚
â”‚   â””â”€â”€ /api/users
â”‚       â”œâ”€â”€ PUT /profile
â”‚       â””â”€â”€ PUT /location
â”‚
â”œâ”€â”€ Service Layer
â”‚   â”œâ”€â”€ AuthService
â”‚   â”œâ”€â”€ RideService
â”‚   â”œâ”€â”€ DriverService
â”‚   â”œâ”€â”€ FareCalculator
â”‚   â””â”€â”€ NotificationService
â”‚
â”œâ”€â”€ Repository Layer
â”‚   â”œâ”€â”€ UserRepository
â”‚   â””â”€â”€ RideRepository
â”‚
â”œâ”€â”€ Model Layer
â”‚   â”œâ”€â”€ User Model
â”‚   â””â”€â”€ Ride Model
â”‚
â””â”€â”€ External Services
    â”œâ”€â”€ MongoDB Connection
    â”œâ”€â”€ Socket.IO Server
    â”œâ”€â”€ Google Maps API
    â””â”€â”€ Payment Gateway
```

---

## Data Flow Diagrams

### Data Flow: Ride Request

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Passengerâ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 1. Ride Request Data
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     2. Validate & Process      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Service â”‚
â”‚  Server  â”‚                                 â”‚  Layer   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                            â”‚
     â”‚ 3. Calculate Fare                         â”‚ 4. Find Drivers
     â”‚                                            â–¼
     â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                    â”‚ Database â”‚
     â”‚                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                         â”‚
     â”‚ 5. Driver Data                          â”‚
     â”‚                                         â”‚
     â–¼                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     6. Emit Event                â”‚
â”‚ Socket.IOâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 7. Broadcast to Drivers
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Drivers â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow: Location Updates

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Driver  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 1. GPS Location
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     2. Location Update          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Driver Appâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   API    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚  Server  â”‚
                                               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â”‚ 3. Update Database
                                                    â–¼
                                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                             â”‚ Database â”‚
                                             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                                  â”‚ 4. Emit Update
                                                  â–¼
                                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                             â”‚ Socket.IOâ”‚
                                             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                                  â”‚ 5. Broadcast
                                                  â–¼
                                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                             â”‚Passenger â”‚
                                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Network Topology

```
                    Internet
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Load Balancer â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ API Pod â”‚    â”‚ API Pod â”‚    â”‚ API Pod â”‚
   â”‚   1     â”‚    â”‚   2     â”‚    â”‚   3     â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Internal Networkâ”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ MongoDB â”‚    â”‚  Redis  â”‚    â”‚ Socket â”‚
   â”‚ Primary â”‚    â”‚  Cache  â”‚    â”‚   IO   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ MongoDB â”‚
   â”‚ Replica â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Document Version**: 1.0  
**Last Updated**: January 2025  
**Maintained By**: Development Team

